; Compact circle 10x10 (fills ram[0..99] with '#' or ' ')
; registers:
; RAX - временный
; RBX - index (address in ram)
; RCX - x
; RDX - y

PUSH 0
PUSHR RBX

PUSH 0
PUSHR RDX

:Y_CHECK
PUSH 10
POPR RDX
JB :Y_BODY
JMP :END

:Y_BODY
PUSH 0
PUSHR RCX

:X_CHECK
PUSH 10
POPR RCX
JB :X_BODY
JMP :Y_INC

:X_BODY
PUSH 9
POPR RCX
PUSH 2
MUL
SUB
PUSHR RAX

POPR RAX
POPR RAX
MUL

PUSH 9
POPR RDX
PUSH 2
MUL
SUB
PUSHR RAX

POPR RAX
POPR RAX
MUL

SUM

PUSHR RAX
PUSH 64
POPR RAX
JBE :SET_HASH

:SET_SPACE
PUSH 32
POPM RBX
JMP :AFTER_WRITE

:SET_HASH
PUSH 35
POPM RBX

:AFTER_WRITE
POPR RBX
PUSH 1
SUM
PUSHR RBX

POPR RCX
PUSH 1
SUM
PUSHR RCX

JMP :X_CHECK

:Y_INC
POPR RDX
PUSH 1
SUM
PUSHR RDX

JMP :Y_CHECK

:END
DRAW
HLT
